# Visual Architecture Diagrams

## 1ï¸âƒ£ Complete System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     STEEL FACTORY MONITORING SYSTEM               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        ğŸŒ WEB BROWSER
                             â”‚
                    http://127.0.0.1:5000
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Flask Web App  â”‚
                    â”‚   (Python 3.x)  â”‚
                    â”‚    app.py       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
        â–¼                    â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   MySQL    â”‚      â”‚  MongoDB   â”‚      â”‚  Blockchain  â”‚
    â”‚ (OLTP)     â”‚      â”‚  (NoSQL)   â”‚      â”‚   (Audit)    â”‚
    â”‚            â”‚      â”‚            â”‚      â”‚              â”‚
    â”‚ Tables:    â”‚      â”‚ Collections:        â”‚ Immutable    â”‚
    â”‚ â€¢ Machines â”‚      â”‚ â€¢ anomaly_logs      â”‚ Hash Chain   â”‚
    â”‚ â€¢ Perf.    â”‚      â”‚ â€¢ audit_logs        â”‚              â”‚
    â”‚ â€¢ Alerts   â”‚      â”‚ â€¢ scan_sessions     â”‚ Verifiable   â”‚
    â”‚ â€¢ Users    â”‚      â”‚                     â”‚              â”‚
    â”‚ â€¢ Anomaliesâ”‚      â”‚                     â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        Live Data         Historical      Tamper-Proof
       Transactions       Analytics        Records
```

---

## 2ï¸âƒ£ Request-Response Cycle

```
USER BROWSER                           FLASK SERVER                    DATABASES
     â”‚                                     â”‚                                â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€ GET /dashboard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚                                â”‚
     â”‚                                     â”œâ”€â†’ Check @admin_required       â”‚
     â”‚                                     â”‚   âœ“ User logged in?           â”‚
     â”‚                                     â”‚   âœ“ Is admin?                 â”‚
     â”‚                                     â”‚                                â”‚
     â”‚                                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚
     â”‚                                     â”‚   SELECT * FROM Machine       â”‚
     â”‚                                     â”‚                                â”‚
     â”‚                                     â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                                     â”‚  [Machine data]              â”‚
     â”‚                                     â”‚                                â”‚
     â”‚                                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚
     â”‚                                     â”‚   SELECT * FROM Performance  â”‚
     â”‚                                     â”‚                                â”‚
     â”‚                                     â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                                     â”‚  [Perf data]                 â”‚
     â”‚                                     â”‚                                â”‚
     â”‚                                     â”œâ”€â†’ Calculate OEE              â”‚
     â”‚                                     â”‚   Format JSON               â”‚
     â”‚                                     â”‚                                â”‚
     â”‚â†â”€â”€â”€â”€ HTML Dashboard Page â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                â”‚
     â”‚  (with <script> tags)              â”‚                                â”‚
     â”‚                                     â”‚                                â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€ AJAX /dashboard_data â”€â”€â”€â”€â”€â”€â†’â”‚                                â”‚
     â”‚                                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚
     â”‚                                     â”‚   More queries if needed     â”‚
     â”‚â†â”€â”€â”€â”€ JSON {oee, alerts, ...} â”€â”€â”€â”€â”€â”‚                                â”‚
     â”‚                                     â”‚                                â”‚
     â”‚ JavaScript processes JSON          â”‚                                â”‚
     â”‚ Updates charts in real-time        â”‚                                â”‚
     â”‚                                     â”‚                                â”‚
```

---

## 3ï¸âƒ£ User Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      LOGIN PROCESS                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Browser: GET /login
   â”‚
   â–¼
   Flask renders login.html
   â”‚
   â–¼
2. User enters username: "admin"
   User enters password: "admin123"
   â”‚
   â–¼
3. Browser: POST /login
   â”‚
   â–¼
4. Flask receives request:
   â”‚
   â”œâ”€â†’ Extract username & password from POST data
   â”‚
   â”œâ”€â†’ Query MySQL: SELECT * FROM User WHERE Username = 'admin'
   â”‚   â”‚
   â”‚   Result: {UserID: 1, Username: 'admin', PasswordHash: '$2b$12...'}
   â”‚
   â”œâ”€â†’ Check password:
   â”‚   check_password_hash(stored_hash, input_password)
   â”‚   â”‚
   â”‚   Result: âœ“ MATCH!
   â”‚
   â”œâ”€â†’ Create session:
   â”‚   session['user_id'] = 1
   â”‚   session['is_admin'] = True
   â”‚
   â””â”€â†’ Redirect: /dashboard
       â”‚
       â–¼
5. Browser: GET /dashboard
   â”‚
   â”œâ”€â†’ Check @admin_required decorator:
   â”‚   â”œâ”€ Is 'user_id' in session? âœ“ YES
   â”‚   â””â”€ Is is_admin True? âœ“ YES
   â”‚
   â””â”€â†’ Load dashboard normally

SUBSEQUENT REQUESTS:
   â”œâ”€â†’ All requests include session cookie
   â”œâ”€â†’ @admin_required verifies session
   â””â”€â†’ Access granted âœ“

LOGOUT:
   â””â”€â†’ session.clear()
       All subsequent requests â†’ Redirect to /login
```

---

## 4ï¸âƒ£ Data Flow: Anomaly Scan

```
                    ADMIN RUNS ANOMALY SCAN

                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ GET /anomalies      â”‚
                    â”‚ Show form with      â”‚
                    â”‚ "Run Scan" button   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    User clicks "Run Scan"
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ POST /run_anomaly   â”‚
                    â”‚ _scan               â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   FLASK PROCESSING STARTS     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                  â”‚                      â”‚
      PHASE 1            PHASE 2              PHASE 3
      FETCH DATA         PROCESS ML           STORE RESULTS
           â”‚                  â”‚                      â”‚
           â–¼                  â–¼                      â–¼
    SELECT * FROM      Extract features:    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    Performance_Data   â€¢ OperatingTime      â”‚ MySQL       â”‚
         â”‚             â€¢ Downtime           â”‚ â†“INSERT     â”‚
         â”‚             â€¢ ActualOutput       â”‚ anomaly_    â”‚
    1000 records       â€¢ GoodUnits          â”‚ detection   â”‚
         â”‚                  â”‚               â”‚             â”‚
         â”‚             Create matrix X     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚             (1000 Ã— 4)                â”‚
         â”‚                  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚             Run ML model:     â”‚ MongoDB     â”‚
         â”‚             IsolationForest   â”‚ â†“INSERT     â”‚
         â”‚                  â”‚            â”‚ anomaly_    â”‚
         â”‚             Predict scores    â”‚ logs        â”‚
         â”‚             [-0.25, 0.1, ...] â”‚             â”‚
         â”‚                  â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚             50 anomalies                â”‚
         â”‚             found!               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                  â”‚                â”‚ Blockchain  â”‚
         â”‚                  â”‚                â”‚ â†“INSERT     â”‚
         â”‚                  â”‚                â”‚ blockchain_ â”‚
         â”‚                  â”‚                â”‚ log (hashed)â”‚
         â”‚                  â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                  â”‚                     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ PHASE 4:       â”‚
                    â”‚ GENERATE       â”‚
                    â”‚ ALERTS         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    HIGH score anomalies
                    INSERT into Alerts table
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ PHASE 5:           â”‚
                    â”‚ LOG TO MONGODB     â”‚
                    â”‚ AUDIT_LOGS         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    log_audit_action(
                      "RUN_SCAN",
                      "Anomaly_Detection",
                      50
                    )
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ redirect to    â”‚
                    â”‚ /anomalies     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ GET /anomalies             â”‚
                    â”‚ Query MySQL Anomaly_       â”‚
                    â”‚ Detection table            â”‚
                    â”‚ Format with badges         â”‚
                    â”‚ Render anomalies.html      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Browser receives page     â”‚
                    â”‚ Shows updated anomalies   â”‚
                    â”‚ with severity colors      â”‚
                    â”‚ ğŸ”´ HIGH                   â”‚
                    â”‚ ğŸŸ  MEDIUM                 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5ï¸âƒ£ Template Inheritance Chain

```
                        base.html
                    (Top-level layout)
                            â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                  â”‚                  â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚dashboard â”‚    â”‚ machines.html â”‚    â”‚alerts.   â”‚
    â”‚.html     â”‚    â”‚               â”‚    â”‚html      â”‚
    â”‚          â”‚    â”‚               â”‚    â”‚          â”‚
    â”‚ extends  â”‚    â”‚ extends       â”‚    â”‚ extends  â”‚
    â”‚ base     â”‚    â”‚ base          â”‚    â”‚ base     â”‚
    â”‚          â”‚    â”‚               â”‚    â”‚          â”‚
    â”‚ <%block  â”‚    â”‚ <%block       â”‚    â”‚ <%block  â”‚
    â”‚ content%>â”‚    â”‚ content%>     â”‚    â”‚ content%>â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚              â”‚                      â”‚
    Inherits:      Inherits:              Inherits:
    â€¢ Header       â€¢ Header               â€¢ Header
    â€¢ Nav          â€¢ Nav                  â€¢ Nav
    â€¢ Footer       â€¢ Footer               â€¢ Footer
    â€¢ CSS          â€¢ CSS                  â€¢ CSS
         â”‚              â”‚                      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                  Each page adds its own
                  <div class="content">
                     Custom HTML
                  </div>
```

---

## 6ï¸âƒ£ Database Relationships

```
                        MYSQL SCHEMA

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Machine      â”‚         â”‚  Production_Batch    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MachineID (PK)  â”‚ â—„â”€â”€â”€â”   â”‚ BatchID (PK)         â”‚
â”‚ MachineName     â”‚     â”‚   â”‚ BatchCode            â”‚
â”‚ MachineType     â”‚     â”‚   â”‚ ProductType          â”‚
â”‚ Location        â”‚     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Status          â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
        â–²               â”‚
        â”‚FK             â”‚FK
        â”‚               â”‚
        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   â”‚                                 â”‚
        â”‚   â–¼                                 â–¼
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ â”‚      Performance_Data                    â”‚
        â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ â”‚ PerformanceID (PK)                       â”‚
        â”‚ â”‚ MachineID (FK â†’ Machine)                 â”‚
        â”‚ â”‚ BatchID (FK â†’ Production_Batch)          â”‚
        â”‚ â”‚ OperatingTime                            â”‚
        â”‚ â”‚ Downtime                                 â”‚
        â”‚ â”‚ ActualOutput                             â”‚
        â”‚ â”‚ IdealOutput                              â”‚
        â”‚ â”‚ GoodUnits                                â”‚
        â”‚ â”‚ TotalUnits                               â”‚
        â”‚ â”‚ OEE                                      â”‚
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚            â”‚FK
        â”‚            â”‚
        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   â”‚  Anomaly_Detection               â”‚
        â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚   â”‚ AnomalyID (PK)                   â”‚
        â”‚   â”‚ MachineID (FK)                   â”‚
        â”‚   â”‚ PerformanceID (FK)               â”‚
        â”‚   â”‚ AnomalyScore                     â”‚
        â”‚   â”‚ IsAnomaly (bool)                 â”‚
        â”‚   â”‚ Timestamp                        â”‚
        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â””â”€â–º â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Alerts                          â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
            â”‚ AlertID (PK)                     â”‚
            â”‚ MachineID (FK)                   â”‚
            â”‚ AlertMessage                     â”‚
            â”‚ Severity                         â”‚
            â”‚ Timestamp                        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Maintenance_Log                 â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
            â”‚ MaintenanceID (PK)               â”‚
            â”‚ MachineID (FK)                   â”‚
            â”‚ IssueDescription                 â”‚
            â”‚ MaintenanceDate                  â”‚
            â”‚ Status                           â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Blockchain_Log                  â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
            â”‚ BlockID (PK)                     â”‚
            â”‚ Data (JSON)                      â”‚
            â”‚ Hash (SHA256)                    â”‚
            â”‚ PreviousHash                     â”‚
            â”‚ Timestamp                        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  User                            â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
            â”‚ UserID (PK)                      â”‚
            â”‚ Username                         â”‚
            â”‚ PasswordHash                     â”‚
            â”‚ IsAdmin                          â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7ï¸âƒ£ Blockchain Concept (Visual)

```
BLOCKCHAIN = CHAIN OF HASHES

Block 1 (Anomaly Detection Run #1)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Data: Machine 1, Score -0.25    â”‚
â”‚ Timestamp: 2026-02-02 15:00:00  â”‚
â”‚ PrevHash: 0000 (first block)     â”‚
â”‚ Hash: SHA256(data + prev_hash)   â”‚
â”‚       = a7f3e9...                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼ (hash included in next block)

Block 2
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Data: Machine 3, Score -0.18    â”‚
â”‚ Timestamp: 2026-02-02 15:01:00  â”‚
â”‚ PrevHash: a7f3e9...              â”‚
â”‚ Hash: SHA256(data + a7f3e9...)   â”‚
â”‚       = b2d4c1...                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼

Block 3
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Data: Machine 2, Score +0.05    â”‚
â”‚ Timestamp: 2026-02-02 15:02:00  â”‚
â”‚ PrevHash: b2d4c1...              â”‚
â”‚ Hash: SHA256(data + b2d4c1...)   â”‚
â”‚       = c5e8f2...                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TAMPERING DETECTION:
If someone tries to change Block 1 data:

Block 1 (MODIFIED)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Data: Machine 1, Score +0.50     â”‚ â† Changed!
â”‚ Timestamp: 2026-02-02 15:00:00  â”‚
â”‚ PrevHash: 0000                   â”‚
â”‚ Hash: OLD = a7f3e9...            â”‚
â”‚ Hash: NEW = x9k2l1... â‰  a7f3e9  â”‚ â† MISMATCH!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Block 2 becomes BROKEN because:
PrevHash = a7f3e9... (from old Block 1)
But Block 1 now has Hash = x9k2l1...
MISMATCH = TAMPERING DETECTED! ğŸš¨
```

---

## 8ï¸âƒ£ ML Anomaly Detection Pipeline

```
                    ISOLATION FOREST

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Input: Performance Data                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [                                           â”‚
â”‚   {OperatingTime: 480, Downtime: 2, ...},  â”‚
â”‚   {OperatingTime: 475, Downtime: 5, ...},  â”‚
â”‚   {OperatingTime: 10, Downtime: 470, ...}, â”‚ â† Anomaly!
â”‚   {OperatingTime: 482, Downtime: 1, ...},  â”‚
â”‚   ...                                       â”‚
â”‚ ]                                           â”‚
â”‚                                             â”‚
â”‚ Total records: 1000                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ML Model: IsolationForest                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Looks for unusual patterns:                 â”‚
â”‚ â€¢ Very high or very low values              â”‚
â”‚ â€¢ Combinations that don't match history     â”‚
â”‚ â€¢ Statistical outliers                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Output: Classification                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [                                           â”‚
â”‚   {IsAnomaly: False, Score: 0.15},         â”‚
â”‚   {IsAnomaly: False, Score: 0.10},         â”‚
â”‚   {IsAnomaly: True, Score: -0.35},  â† Found!
â”‚   {IsAnomaly: False, Score: 0.08},         â”‚
â”‚   ...                                       â”‚
â”‚ ]                                           â”‚
â”‚                                             â”‚
â”‚ Anomalies Found: 50                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Action: Store Results                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ INSERT into MySQL (anomaly_detection)       â”‚
â”‚ INSERT into MongoDB (anomaly_logs)          â”‚
â”‚ INSERT into Blockchain (blockchain_log)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
        Display in UI
        with severity badges:
        ğŸ”´ HIGH: score < -0.25
        ğŸŸ  MEDIUM: -0.25 to 0
```

---

## 9ï¸âƒ£ Session Management

```
USER LOGIN â†’ SESSION CREATED â†’ STORED IN FLASK MEMORY

User 1 (admin)                User 2 (operator)
â”‚                             â”‚
â”œâ”€ Session ID: abc123         â”œâ”€ Session ID: xyz789
â”œâ”€ user_id: 1                 â”œâ”€ user_id: 2
â”œâ”€ username: admin            â”œâ”€ username: operator
â”œâ”€ is_admin: True             â”œâ”€ is_admin: False
â””â”€ created: 15:00             â””â”€ created: 15:05

Every request from User 1 includes cookie: abc123
Every request from User 2 includes cookie: xyz789

Flask middleware:
  If request has cookie abc123:
    â†’ Load session for User 1
    â†’ Check is_admin = True
    â†’ Grant access to admin routes

  If request has cookie xyz789:
    â†’ Load session for User 2
    â†’ Check is_admin = False
    â†’ Deny access to admin routes
    â†’ Redirect to /login

USER LOGOUT:
  session.clear()
  All cookies invalidated
  Next request â†’ Redirect to /login
```

---

## ğŸ”Ÿ File Upload & Processing

```
User selects file           Browser                     Flask Server
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚                            â”‚
â”‚ CSV File        â”‚â”€â”€â”€â”€â”€POSTâ”€â”€â”€â†’â”‚                            â”‚
â”‚ (1000 records)  â”‚             â”‚â”€â”€â”€â”€â”€â”€Request receivedâ”€â”€â”€â”€â”€â”€â†’â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚                            â”‚
                                â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚                    â”‚ Parse CSV file  â”‚
                                â”‚                    â”‚ Validate data   â”‚
                                â”‚                    â”‚ Check columns   â”‚
                                â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚                            â”‚
                                â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚                    â”‚ For each row:   â”‚
                                â”‚                    â”‚ INSERT into DB  â”‚
                                â”‚                    â”‚ Log to audit    â”‚
                                â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚                            â”‚
                                â”‚â†â”€â”€â”€â”€Flash messageâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                                â”‚   "1000 records added"    â”‚
                                â”‚                            â”‚
                                â”‚â†â”€â”€â”€â”€â”€Redirectâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                                â”‚    /performance          â”‚
                                â”‚                            â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Display updated performance list      â”‚
            â”‚ with all uploaded records             â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Key Takeaways

1. **Single Flask Server** handles all routes and logic
2. **3 Databases** store different types of data
3. **Templates** are HTML files with Python snippets
4. **Routes** are URL patterns + handler functions
5. **Decorators** like @admin_required add functionality
6. **AJAX** allows real-time updates without page reload
7. **Session** tracks logged-in users
8. **Blockchain** prevents tampering by hashing data
9. **ML Model** finds anomalies in performance data
10. **Audit Trail** in MongoDB tracks all actions

